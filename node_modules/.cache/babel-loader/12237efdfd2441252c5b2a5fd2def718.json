{"ast":null,"code":"import _regeneratorRuntime from \"/Users/dustinhunt/bank-of-the-sun/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dustinhunt/bank-of-the-sun/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/dustinhunt/bank-of-the-sun/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/dustinhunt/bank-of-the-sun/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dustinhunt/bank-of-the-sun/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dustinhunt/bank-of-the-sun/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dustinhunt/bank-of-the-sun/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dustinhunt/bank-of-the-sun/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/dustinhunt/bank-of-the-sun/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/dustinhunt/bank-of-the-sun/src/components/login.component.js\";\nimport React, { Component } from \"react\";\nimport jsSHA from \"jssha\";\nimport \"../css/login.css\";\nimport axios from \"axios\";\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n    _this.state = {\n      username: '',\n      password: '',\n      loginFailed: false\n    };\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleUserChange = _this.handleUserChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"handleUserChange\",\n    value: function handleUserChange(e) {\n      var _this$setState,\n          _this2 = this;\n\n      this.setState((_this$setState = {}, _defineProperty(_this$setState, e.target.name, e.target.value), _defineProperty(_this$setState, \"loginFailed\", false), _this$setState), function () {\n        console.log(_this2.state);\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      var user = this.state.username;\n      var password = this.state.password;\n      var hmac = new jsSHA('SHA-256', 'TEXT');\n      hmac.setHMACKey(password, 'TEXT');\n      hmac.update(user);\n      hmac.update(Date.now().toString(36).substring(0, 4));\n      var token = \"\".concat(hmac.getHMAC('HEX'), \"%\").concat(user);\n      var api = axios.create({\n        baseURL: 'http://45.77.58.134:8080',\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      });\n\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return api.get('/clients');\n\n              case 3:\n                res = _context.sent;\n\n                _this3.props.history.push(\"/home\", {\n                  token: token\n                });\n\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n\n                // network error - could be 401 or other \"not ok\" HTTP status\n                _this3.setState({\n                  loginFailed: true\n                });\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 7]]);\n      }))();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"login-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Log In\"), React.createElement(\"label\", {\n        htmlFor: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"Username:\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Enter Username\",\n        name: \"username\",\n        onChange: this.handleUserChange,\n        value: this.state.username,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Password:\"), React.createElement(\"input\", {\n        type: \"password\",\n        className: \"form-control\",\n        placeholder: \"Enter Password\",\n        name: \"password\",\n        onChange: this.handleUserChange,\n        value: this.state.password,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), this.state.loginFailed && React.createElement(\"span\", {\n        style: {\n          color: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Login failed\"), React.createElement(\"button\", {\n        className: \"btn btn-primary btn-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"Log in\")), React.createElement(\"p\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"Register.html\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Create an Account\"))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["/Users/dustinhunt/bank-of-the-sun/src/components/login.component.js"],"names":["React","Component","jsSHA","axios","Login","props","state","username","password","loginFailed","handleSubmit","bind","handleUserChange","e","setState","target","name","value","console","log","preventDefault","user","hmac","setHMACKey","update","Date","now","toString","substring","token","getHMAC","api","create","baseURL","headers","get","res","history","push","color"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,kBAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;;IAEMC,K;;;;;AACF,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,+EAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,QAAQ,EAAE,EADD;AAETC,MAAAA,QAAQ,EAAE,EAFD;AAGTC,MAAAA,WAAW,EAAE;AAHJ,KAAb;AAMA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,uDAApB;AACA,UAAKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBD,IAAtB,uDAAxB;AATe;AAUlB;;;;qCAEgBE,C,EAAG;AAAA;AAAA;;AAChB,WAAKC,QAAL,uDACKD,CAAC,CAACE,MAAF,CAASC,IADd,EACqBH,CAAC,CAACE,MAAF,CAASE,KAD9B,kDAEiB,KAFjB,oBAGG,YAAM;AACLC,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAI,CAACb,KAAjB;AACH,OALD;AAMH;;;iCAGYO,C,EAAG;AAAA;;AACZA,MAAAA,CAAC,CAACO,cAAF;AAEA,UAAMC,IAAI,GAAG,KAAKf,KAAL,CAAWC,QAAxB;AACA,UAAMC,QAAQ,GAAG,KAAKF,KAAL,CAAWE,QAA5B;AAEA,UAAMc,IAAI,GAAG,IAAIpB,KAAJ,CAAU,SAAV,EAAqB,MAArB,CAAb;AAEAoB,MAAAA,IAAI,CAACC,UAAL,CAAgBf,QAAhB,EAA0B,MAA1B;AACAc,MAAAA,IAAI,CAACE,MAAL,CAAYH,IAAZ;AACAC,MAAAA,IAAI,CAACE,MAAL,CAAYC,IAAI,CAACC,GAAL,GAAWC,QAAX,CAAoB,EAApB,EAAwBC,SAAxB,CAAkC,CAAlC,EAAqC,CAArC,CAAZ;AAEA,UAAMC,KAAK,aAAMP,IAAI,CAACQ,OAAL,CAAa,KAAb,CAAN,cAA6BT,IAA7B,CAAX;AAEA,UAAMU,GAAG,GAAG5B,KAAK,CAAC6B,MAAN,CAAa;AACrBC,QAAAA,OAAO,EAAE,0BADY;AAErBC,QAAAA,OAAO,EAAE;AAAE,2BAAiB,YAAYL;AAA/B;AAFY,OAAb,CAAZ;;AAKA;AAAA;AAAA,+BAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEyBE,GAAG,CAACI,GAAJ,CAAQ,UAAR,CAFzB;;AAAA;AAEaC,gBAAAA,GAFb;;AAGO,gBAAA,MAAI,CAAC/B,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB,EAAiC;AAC7BT,kBAAAA,KAAK,EAAEA;AADsB,iBAAjC;;AAHP;AAAA;;AAAA;AAAA;AAAA;;AAQO;AACA,gBAAA,MAAI,CAACf,QAAL,CAAc;AACVL,kBAAAA,WAAW,EAAE;AADH,iBAAd;;AATP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAD;AAeH;;;6BAEQ;AAEL,aAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACJ;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAM,QAAA,QAAQ,EAAE,KAAKC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,EAGI;AAAO,QAAA,OAAO,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHJ,EAII;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,SAAS,EAAC,cAA7B;AAA4C,QAAA,WAAW,EAAC,gBAAxD;AACO,QAAA,IAAI,EAAC,UADZ;AAEO,QAAA,QAAQ,EAAE,KAAKE,gBAFtB;AAGO,QAAA,KAAK,EAAE,KAAKN,KAAL,CAAWC,QAHzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,EAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARJ,EASI;AAAO,QAAA,OAAO,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBATJ,EAUI;AAAO,QAAA,IAAI,EAAC,UAAZ;AAAuB,QAAA,SAAS,EAAC,cAAjC;AAAgD,QAAA,WAAW,EAAC,gBAA5D;AACO,QAAA,IAAI,EAAC,UADZ;AAEO,QAAA,QAAQ,EAAE,KAAKK,gBAFtB;AAGO,QAAA,KAAK,EAAE,KAAKN,KAAL,CAAWE,QAHzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAVJ,EAcI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdJ,EAeM,KAAKF,KAAL,CAAWG,WAAX,IAA0B;AAAM,QAAA,KAAK,EAAE;AAAC8B,UAAAA,KAAK,EAAE;AAAR,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAfhC,EAgBI;AAAQ,QAAA,SAAS,EAAC,2BAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAhBJ,CADJ,EAoBI;AAAG,QAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA2B;AAAG,QAAA,IAAI,EAAC,eAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAA3B,CApBJ,CADI,CAAR;AAwBH;;;;EArFetC,S;;AAyFpB,eAAeG,KAAf","sourcesContent":["import React, {Component} from \"react\"\nimport jsSHA from \"jssha\"\nimport \"../css/login.css\"\nimport axios from \"axios\"\n\nclass Login extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            password: '',\n            loginFailed: false\n        }\n\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleUserChange = this.handleUserChange.bind(this);\n    }\n\n    handleUserChange(e) {\n        this.setState({\n            [e.target.name]: e.target.value,\n            loginFailed: false\n        }, () => {\n            console.log(this.state)\n        });\n    }\n\n\n    handleSubmit(e) {\n        e.preventDefault();\n\n        const user = this.state.username;\n        const password = this.state.password;\n\n        const hmac = new jsSHA('SHA-256', 'TEXT');\n\n        hmac.setHMACKey(password, 'TEXT');\n        hmac.update(user);\n        hmac.update(Date.now().toString(36).substring(0, 4));\n\n        const token = `${hmac.getHMAC('HEX')}%${user}`;\n\n        const api = axios.create({\n            baseURL: 'http://45.77.58.134:8080',\n            headers: { 'Authorization': 'Bearer ' + token }\n        });\n\n        (async () => {\n            try {\n                const res = await api.get('/clients');\n                this.props.history.push(\"/home\", {\n                    token: token\n                })\n\n            } catch (e) {\n                // network error - could be 401 or other \"not ok\" HTTP status\n                this.setState({\n                    loginFailed: true\n                })\n            }\n        })();\n\n    }\n\n    render() {\n\n        return (<div>\n            <div className=\"login-form\">\n                <form onSubmit={this.handleSubmit}>\n                    <h2 className=\"text-center\">Log In</h2>\n\n                    <label htmlFor=\"username\">Username:</label>\n                    <input type=\"text\" className=\"form-control\" placeholder=\"Enter Username\"\n                           name=\"username\"\n                           onChange={this.handleUserChange}\n                           value={this.state.username}/>\n                    <br/>\n                    <label htmlFor=\"password\">Password:</label>\n                    <input type=\"password\" className=\"form-control\" placeholder=\"Enter Password\"\n                           name=\"password\"\n                           onChange={this.handleUserChange}\n                           value={this.state.password}/>\n                    <br/>\n                    { this.state.loginFailed && <span style={{color: \"red\"}}>Login failed</span> }\n                    <button className=\"btn btn-primary btn-block\">Log in</button>\n\n                </form>\n                <p className=\"text-center\"><a href=\"Register.html\">Create an Account</a></p>\n            </div>\n        </div>)\n    }\n}\n\n\nexport default Login"]},"metadata":{},"sourceType":"module"}